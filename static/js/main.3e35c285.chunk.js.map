{"version":3,"sources":["App.js","index.js"],"names":["defaultContainer","_ref","children","react_default","a","createElement","className","current","Report","_this$props","this","props","lat","long","description","date_same","hover","esm","latitude","longitude","style","color","opacity","onMouseEnter","onEnter","onMouseLeave","onLeave","index_es","icon","faPoop","size","jsx","Component","App","state","mapData","data","viewport","width","height","zoom","settings","minZoom","maxPitch","dragRotate","_goPrevious","console","log","prev","Object","objectSpread","_this","transitionDuration","transitionInterpolator","FlyToInterpolator","setState","_goNext","parseFloat","_onViewportChange","_goToViewport","_ref2","href","currentMarker","m","offsetLeft","offsetTop","moment","format","media_url","src","Container","containerComponent","onClick","_this2","renderHeader","assign","mapboxApiAccessToken","mapStyle","onViewportChange","map","mkr","App_Report","key","renderPanel","renderPopup","renderDescription","global","ReactDOM","render","App_App","document","getElementById"],"mappings":"w+8EAWMA,EAAmB,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,SAAF,OAAgBC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAiBJ,IACrEK,GAAW,EAETC,mLAEK,IAAAC,EAENC,KAAKC,MADCC,EADAH,EACAG,IAAKC,EADLJ,EACKI,KADLJ,EACWK,YADXL,EACwBM,UADxBN,EACmCO,MAG5C,OAAQb,EAAAC,EAAAC,cAACY,EAAA,EAAD,CACJC,SAAUN,EACVO,UAAWN,GAEXV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACVc,MAAO,CAAEC,MAAO,UAAWC,QAAS,KACpCC,aAAcb,KAAKC,MAAMa,QACzBC,aAAcf,KAAKC,MAAMe,SAE3BvB,EAAAC,EAAAC,cAACsB,EAAA,EAAD,CAAiBC,KAAMC,IAAQC,KAAK,QAGvC3B,EAAAC,EAAAC,cAAA,SAAO0B,IAAI,QAAX,+TAlBeC,aAkCAC,6MAEjBC,MAAQ,CACNC,QAASC,EACTC,SAAU,CACRC,MAAO,OACPC,OAAQ,IACRrB,SAAU,OACVC,WAAY,QACZqB,KAAM,MAERC,SAAU,CACRC,QAAS,KACTC,SAAU,EACVC,YAAY,GAEdrC,SAAU,KA2FdsC,YAAc,WAEVtC,GADe,IAAbA,EACQ,KAECA,EAAU,GAAK,IAE5BuC,QAAQC,IAAIxC,GACZ,IAAIyC,EAAOZ,EAAK7B,GAChBuC,QAAQC,IAAIC,GACZ,IAAMX,EAAQY,OAAAC,EAAA,EAAAD,CAAA,GACTE,EAAKjB,MAAMG,SADF,CAEZlB,UAAW6B,EAAKnC,KAChBK,SAAU8B,EAAKpC,IACf4B,KAAM,KACNY,mBAAoB,KACpBC,uBAAwB,IAAIC,MAE9BH,EAAKI,SAAS,CAAClB,gBAGjBmB,QAAU,WACRjD,GAAWA,EAAU,GAAK,IAC1BuC,QAAQC,IAAIxC,GACZ,IAAIyC,EAAOZ,EAAK7B,GAChBuC,QAAQC,IAAIC,GACZ,IAAMX,EAAQY,OAAAC,EAAA,EAAAD,CAAA,GACTE,EAAKjB,MAAMG,SADF,CAEZlB,UAAWsC,WAAWT,EAAKnC,MAC3BK,SAAUuC,WAAWT,EAAKpC,KAC1B4B,KAAM,KACNY,mBAAoB,KACpBC,uBAAwB,IAAIC,MAE9BH,EAAKI,SAAS,CAAClB,gBAGjBqB,kBAAoB,SAAArB,GAClBc,EAAKI,SAAS,CAAClB,gBAGjBsB,cAAgB,SAAAC,GAA2B,IAAzBzC,EAAyByC,EAAzBzC,UAAWD,EAAc0C,EAAd1C,SAC3BiC,EAAKO,kBAAkB,CACrBpB,MAAO,OACPC,OAAQ,IACRpB,YACAD,WACAsB,KAAM,GACNa,uBAAwB,IAAIC,IAC5BF,mBAAoB,qFArItB,OACEjD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,uDACAF,EAAAC,EAAAC,cAAA,SAAO0B,IAAI,QAAX,iXAkBJ,OACE5B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAf,8SAGqCH,EAAAC,EAAAC,cAAA,KAAGwD,KAAK,sCAAR,mBAHrC,6FAKE1D,EAAAC,EAAAC,cAAA,SAAO0B,IAAI,QAAX,wJAWJ,IAAKrB,KAAKwB,MAAM4B,cACd,OAAO,KAET,IAAMC,EAAIrD,KAAKwB,MAAM4B,cACrB,OACE3D,EAAAC,EAAAC,cAACY,EAAA,EAAD,CACEC,SAAU6C,EAAEnD,IACZO,UAAW4C,EAAElD,KACbmD,WAAY,GACZC,WAAY,IACZ9D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,eAAO6D,IAAOH,EAAEhD,WAAWoD,OAAO,iBAAlC,IAAoDhE,EAAAC,EAAAC,cAAA,WAC7C6D,IAAOH,EAAEhD,WAAWoD,OAAO,UADlC,KAGAhE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQyD,EAAEjD,aAExBiD,EAAEK,WAAajE,EAAAC,EAAAC,cAAA,OAAKgE,IAAKN,EAAEK,aAI9BjE,EAAAC,EAAAC,cAAA,SAAO0B,IAAI,QAAX,ohBA+EJ,IAAMuC,EAAY5D,KAAKC,MAAM4D,oBAAsBvE,EAEnD,OACEG,EAAAC,EAAAC,cAACiE,EAAD,KACEnE,EAAAC,EAAAC,cAAA,oDAA2CF,EAAAC,EAAAC,cAAA,WAA3C,yBAEAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,SAASkE,QAAS9D,KAAKmC,aAAzC,eAEF1C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,SAASkE,QAAS9D,KAAK8C,SAAzC,WAEFrD,EAAAC,EAAAC,cAAA,SAAO0B,IAAI,QAAX,6WAqBG,IAAA0C,EAAA/D,KACP,OACEP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACZI,KAAKgE,eACNvE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACfH,EAAAC,EAAAC,cAACY,EAAA,EAADgC,OAAA0B,OAAA,CACEC,qBAAqB,6FACjBlE,KAAKwB,MAAMO,SACX/B,KAAKwB,MAAMG,SAHjB,CAIEwC,SAAS,oDACTC,iBAAkBpE,KAAKgD,oBAExBqB,YAAIrE,KAAKwB,MAAMC,QAAS,SAAA6C,GAAG,OAC1B7E,EAAAC,EAAAC,cAAC4E,EAADhC,OAAA0B,OAAA,CACEO,IAAG,mBACCF,EAFN,CAGExD,QAAS,kBAAMiD,EAAKlB,SAAS,CAAEO,cAAekB,KAC9CtD,QAAS,kBAAM+C,EAAKlB,SAAS,CAAEO,cAAe,aAGjDpD,KAAKyE,cACLzE,KAAK0E,eAGH1E,KAAK2E,qBAGRlF,EAAAC,EAAAC,cAAA,SAAO0B,IAAI,OAAOuD,OAAO,QAAzB,4WA7NyBtD,aC5CjCuD,IAASC,OAAOrF,EAAAC,EAAAC,cAACoF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.3e35c285.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport './animate.css'\nimport {Component} from 'react';\nimport ReactMapGL, { Marker, FlyToInterpolator} from 'react-map-gl';\nimport map from 'lodash-es/map';\nimport moment from 'moment';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPoop } from '@fortawesome/free-solid-svg-icons';\nimport data from './data/data3.json';\n\nconst defaultContainer = ({children}) => <div className=\"control-panel\">{children}</div>;\nvar current = -1;\n\nclass Report extends Component {\n\n  render() {\n    const {lat, long, description, date_same, hover}\n   = this.props;\n\n  return (<Marker\n      latitude={lat}\n      longitude={long}\n    >\n      <div className=\"poopitypoop\"\n           style={{ color: '#684138', opacity: .85 }}\n           onMouseEnter={this.props.onEnter}\n           onMouseLeave={this.props.onLeave}\n      >\n         <FontAwesomeIcon icon={faPoop} size=\"sm\" />\n\n      </div>\n      <style jsx=\"true\">{`\n          .pin {\n            border-radius: 100px;\n            background: rgba(255, 255, 255, 0.2);\n            padding: 2px;\n            width: 24px;\n            height: 24px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        `}</style>\n    </Marker>\n  );}\n}\n\nexport default class App extends Component {\n\n    state = {\n      mapData: data,\n      viewport: {\n        width: '100%',\n        height: 750,\n        latitude: 37.757,\n        longitude: -122.435,\n        zoom: 11.9,\n      },\n      settings: {\n        minZoom: 11.9,\n        maxPitch: 0,\n        dragRotate: false\n      },\n      current: -1\n    };\n\n  \n\n  renderHeader() {\n    return (\n      <div className=\"header\">\n        <h1> Three Days of Waste </h1>\n        <div> &#x1F4A9; &#x1F4A9; &#x1F4A9; </div>\n        <style jsx=\"true\">{`\n            .header {\n              padding: 35px;\n              align-self: stretch;\n              display: flex;\n              justify-content: space-between;\n              align-items: center;\n            }\n            h1 {\n              margin: 0;\n              font-size: 30px;\n            }\n          `}</style>\n      </div>\n    );\n  }\n\n  renderDescription() {\n    return (\n      <div className=\"description\">\n        Everyone produces waste, but sometimes it ends up in places we don't want it to. This map visualizes human and animal waste related 311 reports in San Francisco from April 22, 2019 to April 24, 2019. \n        In the span of three days, 223 waste-related reports were made.\n        The reports were queried using the <a href=\"https://http://mobile311.sfgov.org\">311 mobile site</a> with terms such as \"poop\" \n        and other related waste products (e.g. condoms, needles, etc.).\n        <style jsx=\"true\">{`\n          .description {\n            padding: 30px;\n            font-size: 15px;\n          }\n          `}</style>\n      </div>\n    );\n  }\n\n  renderPopup() {\n    if (!this.state.currentMarker) {\n      return null;\n    }\n    const m = this.state.currentMarker;\n    return (\n      <Marker\n        latitude={m.lat}\n        longitude={m.long}\n        offsetLeft={24}\n        offsetTop={-30}>\n        <div className=\"popup animated bounceIn mono\">\n          <div> {moment(m.date_same).format(\"MMMM Do, YYYY\")} <br />\n                {moment(m.date_same).format(\"h:mm a\")} </div>\n\n          <div className=\"desc\">{m.description}</div>\n\n          {m.media_url && <img src={m.media_url} />}\n\n        </div>\n\n        <style jsx=\"true\">{`\n         .popup {\n           background: #4E342E;\n           border-radius: 8px;\n           color: white;\n           padding: 12px;\n           font-size: 13px;\n           line-height: 1.5em;\n           position: absolute;\n           width: 250px;\n           pointer-events: none;\n         }\n\n         img {\n          margin-top: 12px;\n          max-width: 100%;\n          max-height: 200px;\n        }\n\n         .desc {\n           margin-top: 12px;\n         }\n       `}</style>\n      </Marker>\n    );\n  }\n  _goPrevious = () => {\n    if (current === -1) {\n      current = 222;\n    } else {\n      current = (current - 1) % 223;\n    }\n    console.log(current);\n    var prev = data[current];\n    console.log(prev);\n    const viewport = {\n      ...this.state.viewport,\n      longitude: prev.long,\n      latitude: prev.lat,\n      zoom: 15.6,\n      transitionDuration: 2500,\n      transitionInterpolator: new FlyToInterpolator(),\n    };\n    this.setState({viewport});\n  };\n\n  _goNext = () => {\n    current = (current + 1) % 223;\n    console.log(current);\n    var prev = data[current];\n    console.log(prev);\n    const viewport = {\n      ...this.state.viewport,\n      longitude: parseFloat(prev.long),\n      latitude: parseFloat(prev.lat),\n      zoom: 15.6,\n      transitionDuration: 2500,\n      transitionInterpolator: new FlyToInterpolator(),\n    };\n    this.setState({viewport});\n  };\n\n  _onViewportChange = viewport => {\n    this.setState({viewport});\n  };\n\n  _goToViewport = ({longitude, latitude}) => {\n    this._onViewportChange({\n      width: '100%',\n      height: 750,\n      longitude,\n      latitude,\n      zoom: 13,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionDuration: 3000\n    });\n  };\n\n  renderPanel() {\n    const Container = this.props.containerComponent || defaultContainer;\n\n    return(\n      <Container>\n        <p>Jump to the previous or next report in  <br/> chronological order.\n        </p>\n        <hr />\n        <div className=\"left\">\n          <button className=\"button\" onClick={this._goPrevious}> Previous </button>\n        </div>\n        <div className=\"right\">\n          <button className=\"button\" onClick={this._goNext}> Next </button>\n        </div>\n        <style jsx=\"true\">{`\n          .left {\n            float: left;\n          }\n\n          .right {\n            float: right;\n          }\n          .button {\n            font-family: 'Computer Modern';\n            border: none;\n            font-size: 13px;\n            color: #6b6b76;\n            background: #ffffff;\n          }\n      `}</style>\n      </Container>\n      \n    )\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        {this.renderHeader()}\n        <div className=\"content\">\n        <ReactMapGL\n          mapboxApiAccessToken=\"pk.eyJ1IjoianNqaWFuZyIsImEiOiJjamswaHVkenAwNnp6M3RyeWlkZjRmeHFrIn0.tfl-yxZeQ1M2UQmE4rnSOA\"\n          {...this.state.settings}\n          {...this.state.viewport}\n          mapStyle=\"mapbox://styles/jsjiang/cjuit41pi4adt1ftqlgm605j3\"\n          onViewportChange={this._onViewportChange}\n        >\n        {map(this.state.mapData, mkr => (\n          <Report\n            key = {`mkr-$(mkr.link)`}\n            {...mkr}\n            onEnter={() => this.setState({ currentMarker: mkr })}\n            onLeave={() => this.setState({ currentMarker: null })}\n            />\n        ))}\n        {this.renderPanel()}\n        {this.renderPopup()}\n        \n      </ReactMapGL>\n          {this.renderDescription()}\n        </div>\n        \n        <style jsx=\"true\" global=\"true\">{`\n            .container {\n              min-height: 100vh;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n            }\n            .content {\n              align-self: stretch;\n              flex-grow: 1;\n              display: flex;\n              flex-direction: column;\n            `}</style>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}